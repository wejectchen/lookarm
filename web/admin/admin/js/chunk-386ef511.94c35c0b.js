(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-386ef511"],{4305:function(e,t,a){"use strict";a("c02d")},c02d:function(e,t,a){},e73d:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("a-card",[a("a-row",{attrs:{gutter:20}},[a("a-col",{attrs:{span:4}},[a("a-button",{attrs:{type:"primary"},on:{click:function(t){e.addTagVisible=!0}}},[e._v("新增状态")])],1)],1),a("a-table",{attrs:{rowKey:"id",columns:e.columns,pagination:e.pagination,dataSource:e.Taglist,bordered:""},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"action",fn:function(t){return[a("div",{staticClass:"actionSlot"},[a("a-button",{staticStyle:{"margin-right":"15px"},attrs:{type:"primary",icon:"edit"},on:{click:function(a){return e.editTag(t.id)}}},[e._v("编辑")]),a("a-button",{staticStyle:{"margin-right":"15px"},attrs:{type:"danger",icon:"delete"},on:{click:function(a){return e.deleteTag(t.id)}}},[e._v("删除")])],1)]}}])})],1),a("a-modal",{attrs:{closable:"",title:"新增状态",visible:e.addTagVisible,width:"60%",destroyOnClose:""},on:{ok:e.addTagOk,cancel:e.addTagCancel}},[a("a-form-model",{ref:"addTagRef",attrs:{model:e.newTag,rules:e.addTagRules}},[a("a-form-model-item",{attrs:{label:"状态名称",prop:"tag_name"}},[a("a-input",{model:{value:e.newTag.tag_name,callback:function(t){e.$set(e.newTag,"tag_name",t)},expression:"newTag.tag_name"}})],1)],1)],1),a("a-modal",{attrs:{closable:"",destroyOnClose:"",title:"编辑状态",visible:e.editTagVisible,width:"60%"},on:{ok:e.editTagOk,cancel:e.editTagCancel}},[a("a-form-model",{ref:"addTagRef",attrs:{model:e.TagInfo,rules:e.TagRules}},[a("a-form-model-item",{attrs:{label:"状态名称",prop:"tag_name"}},[a("a-input",{model:{value:e.TagInfo.tag_name,callback:function(t){e.$set(e.TagInfo,"tag_name",t)},expression:"TagInfo.tag_name"}})],1)],1)],1)],1)},r=[],i=a("5530"),s=(a("96cf"),a("1da1")),o=[{title:"ID",dataIndex:"id",width:"10%",key:"id",align:"center"},{title:"状态状态",dataIndex:"tag_name",width:"20%",key:"tag_name",align:"center"},{title:"操作",width:"30%",key:"action",align:"center",scopedSlots:{customRender:"action"}}],g={data:function(){var e=this;return{pagination:{pageSizeOptions:["5","10","20"],pageSize:5,total:0,showSizeChanger:!0,showTotal:function(e){return"共".concat(e,"条")}},Taglist:[],TagInfo:{tag_name:"",id:0},newTag:{tag_name:""},columns:o,queryParam:{pagesize:5,pagenum:1},editVisible:!1,TagRules:{tag_name:[{validator:function(t,a,n){""===e.TagInfo.tag_name?n(new Error("请输入状态名")):n()},trigger:"blur"}]},addTagRules:{name:[{validator:function(t,a,n){""===e.newTag.tag_name?n(new Error("请输入状态名")):n()},trigger:"blur"}]},editTagVisible:!1,addTagVisible:!1}},created:function(){this.getTagList()},methods:{getTagList:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("tag/list",{pagesize:e.queryParam.pagesize,pagenum:e.queryParam.pagenum});case 2:a=t.sent,n=a.data,200!==n.status&&(n.status,window.sessionStorage.clear(),e.$router.push("/login"),e.$message.error(n.message)),e.Taglist=n.data,e.pagination.total=n.total;case 7:case"end":return t.stop()}}),t)})))()},handleTableChange:function(e,t,a){var n=Object(i["a"])({},this.pagination);n.current=e.current,n.pageSize=e.pageSize,this.queryParam.pagesize=e.pageSize,this.queryParam.pagenum=e.current,e.pageSize!==this.pagination.pageSize&&(this.queryParam.pagenum=1,n.current=1),this.pagination=n,this.getTagList()},deleteTag:function(e){var t=this;this.$confirm({title:"提示：请再次确认",content:"确定要删除该状态吗？一旦删除，无法恢复",onOk:function(){var a=Object(s["a"])(regeneratorRuntime.mark((function a(){var n,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.$http.delete("tag/delete/".concat(e));case 2:if(n=a.sent,r=n.data,200==r.status){a.next=6;break}return a.abrupt("return",t.$message.error(r.message));case 6:t.$message.success("删除成功"),t.getTagList();case 8:case"end":return a.stop()}}),a)})));function n(){return a.apply(this,arguments)}return n}(),onCancel:function(){t.$message.info("已取消删除")}})},addTagOk:function(){var e=this;this.$refs.addTagRef.validate(function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(a){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a){t.next=2;break}return t.abrupt("return",e.$message.error("参数不符合要求，请重新输入"));case 2:return t.next=4,e.$http.post("tag/add",{tag_name:e.newTag.tag_name});case 4:if(n=t.sent,r=n.data,200==r.status){t.next=8;break}return t.abrupt("return",e.$message.error(r.message));case 8:return e.$refs.addTagRef.resetFields(),e.addTagVisible=!1,e.$message.success("添加状态成功"),t.next=13,e.getTagList();case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},addTagCancel:function(){this.$refs.addTagRef.resetFields(),this.addTagVisible=!1,this.$message.info("新增状态已取消")},editTag:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var n,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.editTagVisible=!0,a.next=3,t.$http.get("tag/info/".concat(e));case 3:n=a.sent,r=n.data,t.TagInfo=r.data;case 6:case"end":return a.stop()}}),a)})))()},editTagOk:function(){var e=this;this.$refs.addTagRef.validate(function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(a){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a){t.next=2;break}return t.abrupt("return",e.$message.error("参数不符合要求，请重新输入"));case 2:return t.next=4,e.$http.put("tag/edit/".concat(e.TagInfo.id),{tag_name:e.TagInfo.tag_name});case 4:if(n=t.sent,r=n.data,200==r.status){t.next=8;break}return t.abrupt("return",e.$message.error(r.message));case 8:e.editTagVisible=!1,e.$message.success("更新状态信息成功"),e.getTagList();case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},editTagCancel:function(){this.$refs.addTagRef.resetFields(),this.editTagVisible=!1,this.$message.info("编辑已取消")}}},c=g,u=(a("4305"),a("2877")),d=Object(u["a"])(c,n,r,!1,null,"43fd4e7a",null);t["default"]=d.exports}}]);
//# sourceMappingURL=chunk-386ef511.94c35c0b.js.map